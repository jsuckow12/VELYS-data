<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Data Capture">
    <meta name="theme-color" content="#4F46E5">
    <title>Data Capture Tool</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
</head>
<body>
    <div class="app-container">
        <header class="app-header">
            <h1>Data Capture Tool</h1>
            <div class="header-actions">
                <button id="exportBtn" class="btn btn-secondary">Export</button>
                <button id="clearBtn" class="btn btn-danger">Clear</button>
            </div>
        </header>

        <main class="main-content">
            <div class="form-section">
                <h2>Case Information</h2>
                <div class="form-group">
                    <label for="patientId">V_ID</label>
                    <input type="text" id="patientId" placeholder="Enter V_ID">
                </div>
                <div class="form-group">
                    <label for="date">Date</label>
                    <input type="date" id="date">
                </div>
                <div class="form-group">
                    <label for="caseOfDay">Case of the day</label>
                    <input type="number" id="caseOfDay" placeholder="Enter case number">
                </div>
            </div>

            <div class="form-section">
                <h2>X-Ray Input</h2>
                <div class="form-group">
                    <label for="ldfa">LDFA</label>
                    <input type="number" id="ldfa" step="0.1" placeholder="Enter LDFA">
                </div>
                <div class="form-group">
                    <label for="mpta">MPTA</label>
                    <input type="number" id="mpta" step="0.1" placeholder="Enter MPTA">
                </div>
                <div class="form-group">
                    <label for="hka">HKA</label>
                    <input type="number" id="hka" step="0.1" placeholder="Enter HKA">
                </div>
            </div>

            <div class="form-section">
                <h2>Clinical Data</h2>
                <div class="form-group">
                    <label>Intra-operative Cartilage Assessment</label>
                    <div class="checkbox-grid">
                        <div class="checkbox-item">
                            <input type="checkbox" id="dm" name="cartilage">
                            <label for="dm">DM (Distal Medial)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="dl" name="cartilage">
                            <label for="dl">DL (Distal Lateral)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="pm" name="cartilage">
                            <label for="pm">PM (Posterior Medial)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="pl" name="cartilage">
                            <label for="pl">PL (Posterior Lateral)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tm" name="cartilage">
                            <label for="tm">TM (Tibial Medial)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tl" name="cartilage">
                            <label for="tl">TL (Tibial Lateral)</label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-section planning-section">
                <h2>Planning Screen</h2>
                <div class="planning-columns">
                    <div class="planning-column">
                        <div class="form-group">
                            <label for="femoralVarVal">Femoral Var/Val <span class="script-note">(negative denotes varus)</span></label>
                            <input type="number" id="femoralVarVal" step="0.1" placeholder="Enter femoral varus/valgus">
                        </div>
                        <div class="form-group">
                            <label for="dmPlanning">DM (mm)</label>
                            <input type="number" id="dmPlanning" step="0.1" placeholder="Enter DM in mm">
                        </div>
                        <div class="form-group">
                            <label for="dlPlanning">DL (mm)</label>
                            <input type="number" id="dlPlanning" step="0.1" placeholder="Enter DL in mm">
                        </div>
                        <div class="form-group">
                            <label for="pmPlanning">PM (mm)</label>
                            <input type="number" id="pmPlanning" step="0.1" placeholder="Enter PM in mm">
                        </div>
                        <div class="form-group">
                            <label for="plPlanning">PL (mm)</label>
                            <input type="number" id="plPlanning" step="0.1" placeholder="Enter PL in mm">
                        </div>
                        <div class="form-group">
                            <label for="femoralSize">Femoral Size</label>
                            <select id="femoralSize">
                                <option value="">Select size</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                            </select>
                        </div>
                    </div>
                    <div class="planning-column">
                        <div class="form-group">
                            <label for="tibialVarVal">Tibial Var/Val <span class="script-note">(negative denotes varus)</span></label>
                            <input type="number" id="tibialVarVal" step="0.1" placeholder="Enter tibial varus/valgus">
                        </div>
                        <div class="form-group">
                            <label for="tmPlanning">TM (mm)</label>
                            <input type="number" id="tmPlanning" step="0.1" placeholder="Enter TM in mm">
                        </div>
                        <div class="form-group">
                            <label for="tlPlanning">TL (mm)</label>
                            <input type="number" id="tlPlanning" step="0.1" placeholder="Enter TL in mm">
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-section">
                <h2>Calculations</h2>
                <div class="form-group">
                    <label>DF_d (Distal Femur Delta):</label>
                    <span id="dfdOutput"></span>
                </div>
                <div class="form-group">
                    <label>DT_d (Proximal Tibia Delta):</label>
                    <span id="dtdOutput"></span>
                </div>
                <div class="form-group">
                    <label>FW (Femoral Width):</label>
                    <span id="fwOutput"></span>
                </div>
                <div class="form-group">
                    <label>LDFA_v:</label>
                    <span id="ldfavOutput"></span>
                </div>
                <div class="form-group">
                    <label>MPTA_v:</label>
                    <span id="mptavOutput"></span>
                </div>
                <div class="form-group">
                    <label>JLO_v:</label>
                    <span id="jlovOutput"></span>
                </div>
                <div class="form-group">
                    <label>aHKA_v:</label>
                    <span id="ahkavOutput"></span>
                </div>
            </div>

            <div class="form-section">
                <h2>Notes</h2>
                <div class="form-group">
                    <label for="notes">Additional Notes</label>
                    <textarea id="notes" placeholder="Enter additional notes"></textarea>
                </div>
            </div>

            <div class="action-buttons">
                <button id="saveBtn" class="btn btn-primary">Save Data</button>
                <button id="cameraBtn" class="btn btn-secondary">ðŸ“· Camera</button>
            </div>
        </main>

        <div id="cameraModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Camera Capture</h3>
                    <button class="close-btn" id="closeCamera">&times;</button>
                </div>
                <div class="modal-body">
                    <video id="camera" autoplay playsinline></video>
                    <canvas id="canvas" style="display: none;"></canvas>
                    <div class="camera-controls">
                        <button id="captureBtn" class="btn btn-primary">Capture Photo</button>
                        <button id="switchCameraBtn" class="btn btn-secondary">Switch Camera</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="toast" class="toast"></div>
    </div>

    <script src="app.js"></script>
</body>
</html> 
